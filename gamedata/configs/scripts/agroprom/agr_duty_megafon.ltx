[logic]
active = sr_idle@prefirst
;on_hit = hit

[sr_idle@prefirst]
on_info = {+agr_duty_megafon_hit} nil
on_info2 = {+agr_duty_megafon_start} sr_idle@first

[sr_idle@first]
on_info = {+agr_duty_megafon_hit} nil
on_info2 = {=smart_captured_by_faction(agr_smart_terrain_1_6:dolg)} sr_idle@wait %=play_sound(agr_base_dolg_megafon_0)%, sr_idle@pause

[sr_idle@wait]
on_info = {+agr_duty_megafon_hit} nil %=stop_sound%
on_signal = sound_end | sr_idle@pause

[sr_idle@pause]
on_info = {+agr_duty_megafon_hit} nil
on_timer = 45000 | sr_idle@first

;[hit]
;on_info = %+agr_duty_megafon_hit%